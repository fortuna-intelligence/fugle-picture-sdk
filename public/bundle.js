var FuglePicture=function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;const r="https://wearn.api.fugle.tw/picture/v0/card/request";const a=async(t,r,a)=>{const o={method:"GET",headers:new Headers({Authorization:`Bearer ${a}`}),mode:"cors",cache:"default"},n=await fetch(r,o),c=function(t){let r="";return[].slice.call(new Uint8Array(t)).forEach(e=>r+=String.fromCharCode(e)),e.btoa(r)}(await n.arrayBuffer());t.setAttribute("src","data:image/jpeg;base64,"+c)};return new class{init(e){e?(this.apiToken=e,function(e){t.addEventListener("DOMNodeInserted",t=>{if(t.target.tagName&&"img"===t.target.tagName.toLowerCase()){const r=t.target;"fugle"!==r.getAttribute("type")||r.src||a(r,r.getAttribute("fugle-src"),e)}t.target.hasChildNodes()&&t.target.querySelectorAll('img[type="fugle"]').forEach(t=>{t.src||a(t,t.getAttribute("fugle-src"),e)})})}(e)):console.warn("[Fugle Picture] Must Provide ApiToken")}checkToken(){if(!this.apiToken)throw console.warn("[Fugle Picture] Must Provide ApiToken"),new Error}async getUrl(e,t){try{this.checkToken();const a=`${r}?symbolId=${e}&cardSpecId=${t}`,o={method:"GET",headers:new Headers({Authorization:`Bearer ${this.apiToken}`}),mode:"cors",cache:"default"},n=await fetch(a,o),c=await n.json(),{url:i}=c.data;return i}catch(e){return null}}}}(window,document);
