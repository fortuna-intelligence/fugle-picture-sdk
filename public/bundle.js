var FuglePicture=function(e,t){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,t=t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t;const r=async(t,r,a)=>{const o={method:"GET",headers:new Headers({Authorization:`Bearer ${a}`}),mode:"cors",cache:"default"},c=await fetch(r,o),n=function(t){let r="";return[].slice.call(new Uint8Array(t)).forEach(e=>r+=String.fromCharCode(e)),e.btoa(r)}(await c.arrayBuffer());t.setAttribute("src","data:image/jpeg;base64,"+n)};return new class{init(e){e?(this.apiToken=e,function(e){t.addEventListener("DOMNodeInserted",t=>{if(t.target.tagName&&"img"===t.target.tagName.toLowerCase()){const a=t.target;"fugle"!==a.getAttribute("type")||a.src||r(a,a.getAttribute("fugle-src"),e)}if(t.target.hasChildNodes()){t.target.querySelectorAll('img[type="fugle"]').forEach(t=>{t.src||r(t,t.getAttribute("fugle-src"),e)})}})}(e)):console.warn("[Fugle Picture] Must Provide ApiToken")}checkToken(){if(!this.apiToken)throw console.warn("[Fugle Picture] Must Provide ApiToken"),new Error}async getUrl(e,t){try{this.checkToken();const r=`https://wearn.api-dev.fugle.tw/picture/v0/card/request?symbolId=${e}&cardSpecId=${t}`,a={method:"GET",headers:new Headers({Authorization:`Bearer ${this.apiToken}`}),mode:"cors",cache:"default"},o=await fetch(r,a),c=await o.json(),{url:n}=c.data;return n}catch(e){return null}}}}(window,document);
